<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Self-Assessment - Evaluate Your Organization's AI Maturity</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #1e293b;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #4facfe 75%, #00f2fe 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            min-height: 100vh;
            padding: 2rem 1rem;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 107, 107, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(72, 187, 120, 0.2) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Reduce motion for users who prefer it - accessibility feature
           Allows short transitions for feedback while removing long animations */
        @media (prefers-reduced-motion: reduce) {
            body {
                animation: none;
            }
            *, *::before, *::after {
                animation-duration: 0s;
                animation-iteration-count: 1;
                transition-duration: 0.15s; /* Keep short transitions for immediate feedback */
            }
            /* Remove shimmer effects specifically */
            fieldset::before,
            .btn-primary::before {
                display: none;
            }
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95); /* Solid fallback for browsers without backdrop-filter */
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 24px;
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.25), 0 10px 30px rgba(0, 0, 0, 0.15);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.3);
            position: relative;
            z-index: 1;
        }

        /* Feature detection fallback for backdrop-filter support */
        @supports not (backdrop-filter: blur(20px)) {
            .container {
                background: rgba(255, 255, 255, 0.98); /* More opaque for better readability without blur */
            }
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 3.5rem 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            animation: headerPulse 8s ease-in-out infinite;
        }

        @keyframes headerPulse {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(5%, 5%) scale(1.1); }
        }

        .logo {
            margin-bottom: 1.5rem;
            position: relative;
            z-index: 1;
        }

        .logo img {
            height: 160px;
            width: auto;
            filter: drop-shadow(0 4px 15px rgba(0, 0, 0, 0.2));
            transition: transform 0.3s ease;
        }

        .logo img:hover {
            transform: scale(1.05);
        }

        h1 {
            font-size: 2.8rem;
            margin-bottom: 1rem;
            font-weight: 800;
            letter-spacing: -0.5px;
            position: relative;
            z-index: 1;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
        }

        .intro {
            font-size: 1.15rem;
            opacity: 0.98;
            max-width: 750px;
            margin: 0 auto;
            line-height: 1.8;
            position: relative;
            z-index: 1;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        main {
            padding: 3rem 2.5rem;
        }

        section {
            margin-bottom: 3rem;
        }

        .category-title {
            font-size: 1.5rem;
            color: #667eea; /* Fallback color for browsers without gradient text support */
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1.75rem;
            padding-bottom: 0.75rem;
            border-bottom: 3px solid transparent;
            border-image: linear-gradient(90deg, #667eea, #764ba2, transparent) 1;
            font-weight: 700;
            letter-spacing: -0.3px;
        }

        /* Fallback for browsers that don't support background-clip: text */
        @supports not (-webkit-background-clip: text) {
            .category-title {
                color: #667eea;
                -webkit-text-fill-color: initial;
            }
        }

        .questions-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        fieldset {
            border: none;
            margin-bottom: 0;
            padding: 1.75rem;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(248, 250, 252, 0.9) 100%);
            border-radius: 16px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08), 0 1px 3px rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.5);
            position: relative;
            overflow: hidden;
        }

        fieldset::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            transition: transform 0.5s ease;
            transform: translateX(-100%);
        }

        fieldset:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.15), 0 3px 8px rgba(0, 0, 0, 0.08);
            border-color: rgba(102, 126, 234, 0.3);
        }

        fieldset:hover::before {
            transform: translateX(100%);
        }

        fieldset.error {
            background: #fef2f2;
            border: 2px solid #fca5a5;
        }

        legend {
            font-weight: 700;
            color: #1e293b;
            font-size: 1.05rem;
            margin-bottom: 1.25rem;
            padding: 0;
            line-height: 1.5;
            position: relative;
            z-index: 1;
        }

        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .radio-option {
            display: flex;
            align-items: center;
            padding: 0.75rem 0.875rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            z-index: 1;
            background: rgba(255, 255, 255, 0.5);
            border: 2px solid transparent;
        }

        .radio-option:hover {
            background: rgba(255, 255, 255, 0.9);
            transform: translateX(4px);
            border-color: rgba(102, 126, 234, 0.2);
        }

        /* Progressive enhancement: :has() is supported in modern browsers
           Older browsers will still have functional radio buttons, just without the enhanced selected state styling
           Note: Browser support continuously evolving - check caniuse.com for latest compatibility */
        .radio-option:has(input:checked) {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.15) 0%, rgba(118, 75, 162, 0.15) 100%);
            border-color: #667eea;
        }

        /* Fallback for browsers that don't support :has() - style the checked radio button itself */
        .radio-option input[type="radio"]:checked {
            transform: scale(1.1);
        }

        .radio-option input[type="radio"] {
            margin-right: 0.875rem;
            cursor: pointer;
            width: 20px;
            height: 20px;
            accent-color: #667eea;
            position: relative;
            flex-shrink: 0;
        }

        .radio-option input[type="radio"]:focus {
            outline: 3px solid rgba(102, 126, 234, 0.3);
            outline-offset: 2px;
        }

        .radio-option label {
            cursor: pointer;
            user-select: none;
            flex: 1;
            font-size: 0.975rem;
            font-weight: 500;
            color: #334155;
            transition: color 0.3s ease;
        }

        /* Progressive enhancement for label styling when radio is checked */
        .radio-option:has(input:checked) label {
            color: #1e293b;
            font-weight: 600;
        }

        /* Fallback: Ensure labels are still visible and readable in all browsers */
        .radio-option input[type="radio"]:checked + label {
            color: #1e293b;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .questions-grid {
                grid-template-columns: 1fr;
            }
        }

        .warning {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-left: 4px solid #f59e0b;
            padding: 1.25rem 1.5rem;
            margin: 1.25rem 0;
            border-radius: 12px;
            display: none;
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.2);
        }

        .warning.show {
            display: block;
        }

        .warning-text {
            color: #92400e;
            font-weight: 500;
        }

        .contact-info {
            margin-bottom: 3rem;
            padding: 2.5rem;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            border-radius: 20px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12), 0 2px 6px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.5);
            position: relative;
            overflow: hidden;
        }

        .contact-info::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2, #f093fb);
        }

        .contact-info h2 {
            font-size: 1.6rem;
            color: #667eea; /* Fallback color for browsers without gradient text support */
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1.75rem;
            font-weight: 700;
            letter-spacing: -0.3px;
        }

        /* Fallback for browsers that don't support background-clip: text */
        @supports not (-webkit-background-clip: text) {
            .contact-info h2 {
                color: #667eea;
                -webkit-text-fill-color: initial;
            }
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 0.625rem;
            font-size: 1.025rem;
        }

        .form-group label .required {
            color: #dc2626;
            margin-left: 0.25rem;
        }

        .form-group input[type="text"],
        .form-group input[type="email"] {
            width: 100%;
            padding: 0.875rem 1.125rem;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        .form-group input[type="text"]:focus,
        .form-group input[type="email"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.15), 0 4px 12px rgba(0, 0, 0, 0.08);
            transform: translateY(-1px);
            background: white;
        }

        .form-group input[type="text"].error,
        .form-group input[type="email"].error {
            border-color: #dc2626;
            background: #fef2f2;
        }

        .form-group .error-message {
            display: none;
            color: #dc2626;
            font-size: 0.875rem;
            margin-top: 0.5rem;
        }

        .form-group .error-message.show {
            display: block;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 1.125rem 3.5rem;
            font-size: 1.15rem;
            font-weight: 700;
            border-radius: 14px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4), 0 3px 10px rgba(0, 0, 0, 0.15);
            display: block;
            margin: 2.5rem auto;
            letter-spacing: 0.3px;
            position: relative;
            overflow: hidden;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .btn-primary:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 12px 35px rgba(102, 126, 234, 0.5), 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .btn-primary:active {
            transform: translateY(-1px) scale(1.01);
        }

        .btn-primary:focus {
            outline: 4px solid rgba(102, 126, 234, 0.3);
            outline-offset: 2px;
        }

        #results {
            display: none;
            margin-top: 3rem;
            padding: 2.5rem;
            background: linear-gradient(135deg, rgba(248, 250, 252, 0.95) 0%, rgba(226, 232, 240, 0.95) 100%);
            border-radius: 20px;
            animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        #results.show {
            display: block;
        }

        .result-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 2.5rem;
            border-radius: 16px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15), 0 2px 8px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .result-title {
            font-size: 2rem;
            margin-bottom: 1.25rem;
            color: #1e293b;
            font-weight: 800;
            letter-spacing: -0.5px;
        }

        .badge {
            display: inline-block;
            padding: 0.625rem 1.75rem;
            border-radius: 25px;
            font-weight: 700;
            font-size: 1rem;
            margin-bottom: 1.75rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            letter-spacing: 0.3px;
        }

        .badge.level-1 {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            color: #92400e;
        }

        .badge.level-2 {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            color: #1e40af;
        }

        .badge.level-3 {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            color: #065f46;
        }

        .badge.level-4 {
            background: linear-gradient(135deg, #ede9fe 0%, #ddd6fe 100%);
            color: #5b21b6;
        }

        .result-explanation {
            font-size: 1.075rem;
            line-height: 1.8;
            color: #475569;
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, rgba(248, 250, 252, 0.8) 0%, rgba(241, 245, 249, 0.8) 100%);
            border-radius: 12px;
            border-left: 4px solid #667eea;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .recommendations {
            margin-top: 2rem;
        }

        .recommendations h3 {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: #1e293b;
        }

        .recommendations ul {
            list-style: none;
            padding: 0;
        }

        .recommendations li {
            padding: 1rem 1rem 1rem 2.5rem;
            margin-bottom: 0.75rem;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(248, 250, 252, 0.9) 100%);
            border-radius: 10px;
            position: relative;
            border-left: 3px solid #667eea;
            transition: all 0.3s ease;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
        }

        .recommendations li:hover {
            transform: translateX(6px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .recommendations li::before {
            content: "â†’";
            position: absolute;
            left: 1rem;
            color: #667eea;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .category-scores {
            margin-top: 2rem;
            padding: 2rem;
            background: linear-gradient(135deg, rgba(248, 250, 252, 0.9) 0%, rgba(241, 245, 249, 0.9) 100%);
            border-radius: 14px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }

        .category-scores h3 {
            font-size: 1.3rem;
            margin-bottom: 1.25rem;
            color: #1e293b;
            font-weight: 700;
        }

        .score-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.25rem;
            margin-bottom: 0.625rem;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            transition: all 0.3s ease;
            border: 1px solid rgba(102, 126, 234, 0.1);
        }

        .score-item:hover {
            transform: translateX(4px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .score-label {
            font-weight: 600;
            color: #475569;
        }

        .score-value {
            font-weight: 800;
            color: #667eea; /* Fallback color for browsers without gradient text support */
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 1.15rem;
        }

        /* Fallback for browsers that don't support background-clip: text */
        @supports not (-webkit-background-clip: text) {
            .score-value {
                color: #667eea;
                -webkit-text-fill-color: initial;
            }
        }

        footer {
            padding: 2.5rem 2rem;
            text-align: center;
            color: #64748b;
            font-size: 0.925rem;
            border-top: 1px solid rgba(226, 232, 240, 0.5);
            background: linear-gradient(135deg, rgba(248, 250, 252, 0.5) 0%, rgba(241, 245, 249, 0.5) 100%);
        }

        @media (max-width: 768px) {
            body {
                padding: 1rem 0.5rem;
            }

            h1 {
                font-size: 2.2rem;
            }

            .intro {
                font-size: 1.05rem;
            }

            header {
                padding: 2.5rem 1.5rem;
            }

            main {
                padding: 2rem 1.5rem;
            }

            .contact-info {
                padding: 2rem 1.5rem;
            }

            fieldset {
                padding: 1.25rem;
            }

            .btn-primary {
                padding: 1rem 2.5rem;
                font-size: 1.05rem;
            }

            .result-title {
                font-size: 1.65rem;
            }

            .result-card {
                padding: 2rem 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <img src="assets/isolutions-logo.png" alt="iSolutions Logo">
            </div>
            <h1>AI Self-Assessment</h1>
            <p class="intro">We will ask a few questions to help you identify the best path toward your ideal AI adoption. This assessment takes about 5-10 minutes and will provide personalized recommendations based on your organization's AI maturity.</p>
        </header>

        <main>
            <div class="warning" id="warning" role="alert">
                <p class="warning-text">Please complete all required fields and answer all questions before finishing the assessment.</p>
            </div>

            <form id="assessmentForm">
                <div class="contact-info">
                    <h2>Contact Information</h2>
                    <div class="form-group">
                        <label for="companyName">Company Name<span class="required">*</span></label>
                        <input type="text" id="companyName" name="companyName" required>
                        <div class="error-message" id="companyNameError">Please enter your company name.</div>
                    </div>
                    <div class="form-group">
                        <label for="email">Email Address<span class="required">*</span></label>
                        <input type="email" id="email" name="email" required>
                        <div class="error-message" id="emailError">Please enter a valid email address.</div>
                    </div>
                </div>

                <div id="questionsContainer"></div>
                
                <button type="submit" class="btn-primary">Finish Assessment</button>
            </form>

            <div id="results" aria-live="polite"></div>
        </main>

        <footer>
            <p>This assessment provides indicative guidance and is not a substitute for professional consulting.</p>
        </footer>
    </div>

    <script>
        // Email validation regex
        const EMAIL_REGEX = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

        // Question scales
        const SCALE_A = [
            { label: 'Not at all', value: 0 },
            { label: 'Planned or experimental', value: 1 },
            { label: 'Partially', value: 2 },
            { label: 'Fully established', value: 3 }
        ];

        const SCALE_B = [
            { label: 'Not at all', value: 0 },
            { label: 'Planned or experimental', value: 1 },
            { label: 'Partially or in some areas', value: 2 },
            { label: 'Fully established or widely used', value: 3 }
        ];

        // Questions catalog (condensed to 8 key questions)
        // Note: 'category' is used for display grouping, 'categoryGroup' is used for scoring logic
        const QUESTIONS = [
            // Strategy (Q1-Q2)
            { 
                id: 'strategy', 
                category: 'Strategy and Maturity', 
                text: 'How much is AI part of your corporate strategy?', 
                scale: 'A',
                categoryGroup: 'strategy'
            },
            { 
                id: 'usage', 
                category: 'Strategy and Maturity', 
                text: 'How is AI currently used in your organization?', 
                scale: 'B',
                categoryGroup: 'strategy'
            },

            // Governance (Q3-Q4)
            { 
                id: 'governance', 
                category: 'Organization and Governance', 
                text: 'Do you have formal AI governance (policies, roles, ethics)?', 
                scale: 'A',
                categoryGroup: 'governance'
            },
            { 
                id: 'compliance', 
                category: 'Organization and Governance', 
                text: 'How are data security and compliance managed for AI?', 
                scale: 'A',
                categoryGroup: 'governance'
            },

            // Skills (Q5-Q6)
            { 
                id: 'training', 
                category: 'Skills and Culture', 
                text: 'How well are employees trained or informed about AI?', 
                scale: 'A',
                categoryGroup: 'skills'
            },
            { 
                id: 'culture', 
                category: 'Skills and Culture', 
                text: "How open is your organization's culture toward AI and automation?", 
                scale: 'A',
                categoryGroup: 'skills'
            },

            // Technology (Q7-Q8)
            { 
                id: 'usecases', 
                category: 'Technology and Use Cases', 
                text: 'How many AI use cases have been implemented?', 
                scale: 'B',
                categoryGroup: 'technology'
            },
            { 
                id: 'impact', 
                category: 'Technology and Use Cases', 
                text: 'Do AI solutions generate measurable revenue or efficiency gains?', 
                scale: 'A',
                categoryGroup: 'technology'
            }
        ];

        // Maturity level definitions (adjusted for 8 questions, max score 24)
        const MATURITY_LEVELS = {
            1: {
                name: 'Starting',
                range: [0, 6],
                badge: 'level-1',
                explanation: 'Your organization is at the beginning of its AI journey. AI strategy, governance, and adoption are at an early stage. This is a great starting point with significant opportunity for growth.',
                recommendations: [
                    'Define an AI strategy and vision aligned with business goals',
                    'Establish AI governance framework and assign clear roles',
                    'Build foundational data infrastructure and platform capabilities',
                    'Identify and launch 2-3 pilot use cases with clear success criteria',
                    'Launch basic AI awareness training for all employees'
                ]
            },
            2: {
                name: 'Experimenting',
                range: [7, 12],
                badge: 'level-2',
                explanation: 'Your organization has started experimenting with AI through early pilots. However, governance structures and value realization processes are still limited. Focus on consolidating learnings and building sustainable practices.',
                recommendations: [
                    'Consolidate platform and establish technical standards',
                    'Expand governance processes and establish clear decision-making frameworks',
                    'Build and prioritize a use case funnel with business value assessment',
                    'Offer targeted enablement and training programs for different roles',
                    'Define and track success metrics and KPIs for AI initiatives'
                ]
            },
            3: {
                name: 'Scaling',
                range: [13, 18],
                badge: 'level-3',
                explanation: 'Your organization has productive AI use cases generating measurable value. The focus now is on scaling successful initiatives, expanding reach across the organization, and building repeatable processes.',
                recommendations: [
                    'Expand use case portfolio across different business units',
                    'Enable business teams through citizen development approaches',
                    'Strengthen MLOps capabilities and monitoring infrastructure',
                    'Implement FinOps practices to manage AI costs and optimize value',
                    'Deploy advanced training programs and certification paths'
                ]
            },
            4: {
                name: 'Strategic Leadership',
                range: [19, 24],
                badge: 'level-4',
                explanation: 'AI is strategically embedded across your organization and delivers recurring business value. Your organization is positioned as an AI leader, with mature practices and continuous innovation. Focus on maintaining leadership and exploring cutting-edge capabilities.',
                recommendations: [
                    'Define and execute a long-term enterprise AI roadmap',
                    'Mature governance structures and establish a comprehensive AI Center of Excellence',
                    'Invest in innovation programs for autonomous agents and advanced generative AI',
                    'Implement enterprise-wide KPIs for AI performance and business impact',
                    'Build external partnerships and ecosystem relationships',
                    'Ensure AI regulation readiness (e.g., EU AI Act compliance)'
                ]
            }
        };

        // State management
        let answers = {};
        let contactInfo = {
            companyName: '',
            email: ''
        };

        // Initialize the form
        function initForm() {
            const container = document.getElementById('questionsContainer');
            let currentCategory = '';
            let categorySection = null;
            let questionsGrid = null;

            QUESTIONS.forEach((question, index) => {
                // Create new category section if needed
                if (question.category !== currentCategory) {
                    currentCategory = question.category;
                    categorySection = document.createElement('section');
                    categorySection.innerHTML = `<h2 class="category-title">${currentCategory}</h2>`;
                    
                    // Create grid container for questions
                    questionsGrid = document.createElement('div');
                    questionsGrid.className = 'questions-grid';
                    categorySection.appendChild(questionsGrid);
                    
                    container.appendChild(categorySection);
                }

                // Create fieldset for question
                const fieldset = document.createElement('fieldset');
                fieldset.id = `question-${question.id}`;
                
                const legend = document.createElement('legend');
                legend.textContent = `${index + 1}. ${question.text}`;
                fieldset.appendChild(legend);

                const radioGroup = document.createElement('div');
                radioGroup.className = 'radio-group';
                radioGroup.setAttribute('role', 'radiogroup');
                radioGroup.setAttribute('aria-labelledby', `legend-${question.id}`);

                // Get appropriate scale
                const scale = question.scale === 'A' ? SCALE_A : SCALE_B;

                scale.forEach(option => {
                    const radioOption = document.createElement('div');
                    radioOption.className = 'radio-option';

                    const input = document.createElement('input');
                    input.type = 'radio';
                    input.name = question.id;
                    input.value = option.value;
                    input.id = `${question.id}-${option.value}`;
                    input.addEventListener('change', () => handleAnswerChange(question.id, option.value));

                    const label = document.createElement('label');
                    label.htmlFor = input.id;
                    label.textContent = option.label;

                    radioOption.appendChild(input);
                    radioOption.appendChild(label);
                    radioGroup.appendChild(radioOption);
                });

                fieldset.appendChild(radioGroup);
                questionsGrid.appendChild(fieldset);
            });

            // Setup contact info fields
            const companyNameInput = document.getElementById('companyName');
            const emailInput = document.getElementById('email');

            companyNameInput.addEventListener('input', (e) => {
                contactInfo.companyName = e.target.value;
                saveContactInfo();
                clearFieldError('companyName');
            });

            emailInput.addEventListener('input', (e) => {
                contactInfo.email = e.target.value;
                saveContactInfo();
                clearFieldError('email');
            });

            // Load saved answers if available
            loadSavedAnswers();
            loadContactInfo();
        }

        // Handle answer change
        function handleAnswerChange(questionId, value) {
            answers[questionId] = parseInt(value);
            
            // Remove error state if present
            const fieldset = document.getElementById(`question-${questionId}`);
            if (fieldset) {
                fieldset.classList.remove('error');
            }

            // Save to localStorage
            saveAnswers();
        }

        // Save answers to localStorage
        function saveAnswers() {
            try {
                localStorage.setItem('ai_assessment_answers', JSON.stringify(answers));
            } catch (e) {
                // Note: This is safe to fail silently - assessment will still work, just won't persist between sessions
                console.warn('Could not save assessment progress. Your answers will not be saved between sessions.', e);
            }
        }

        // Load saved answers from localStorage
        function loadSavedAnswers() {
            try {
                const saved = localStorage.getItem('ai_assessment_answers');
                if (saved) {
                    answers = JSON.parse(saved);
                    
                    // Populate form with saved answers
                    // Note: questionId values are controlled (from QUESTIONS array), not user input, so querySelector is safe
                    Object.keys(answers).forEach(questionId => {
                        const input = document.querySelector(`input[name="${questionId}"][value="${answers[questionId]}"]`);
                        if (input) {
                            input.checked = true;
                        }
                    });
                }
            } catch (e) {
                // Note: This is safe to fail silently - assessment will start fresh if saved data can't be loaded
                console.warn('Could not load previously saved assessment progress. Starting fresh.', e);
            }
        }

        // Save contact info to localStorage
        function saveContactInfo() {
            try {
                localStorage.setItem('ai_assessment_contact', JSON.stringify(contactInfo));
            } catch (e) {
                console.warn('Could not save contact information. Your info will not be saved between sessions.', e);
            }
        }

        // Load contact info from localStorage
        function loadContactInfo() {
            try {
                const saved = localStorage.getItem('ai_assessment_contact');
                if (saved) {
                    contactInfo = JSON.parse(saved);
                    
                    // Populate form with saved contact info
                    const companyNameInput = document.getElementById('companyName');
                    const emailInput = document.getElementById('email');
                    
                    if (companyNameInput && contactInfo.companyName) {
                        companyNameInput.value = contactInfo.companyName;
                    }
                    if (emailInput && contactInfo.email) {
                        emailInput.value = contactInfo.email;
                    }
                }
            } catch (e) {
                console.warn('Could not load previously saved contact information. Starting fresh.', e);
            }
        }

        // Clear field error
        function clearFieldError(fieldName) {
            const input = document.getElementById(fieldName);
            const errorMessage = document.getElementById(`${fieldName}Error`);
            
            if (input) {
                input.classList.remove('error');
            }
            if (errorMessage) {
                errorMessage.classList.remove('show');
            }
        }

        // Validate form
        function validateForm() {
            const warning = document.getElementById('warning');
            let isValid = true;
            let firstError = null;

            // Validate contact info
            const companyNameInput = document.getElementById('companyName');
            const emailInput = document.getElementById('email');
            const companyNameError = document.getElementById('companyNameError');
            const emailError = document.getElementById('emailError');

            // Validate company name - check input value directly
            const companyNameValue = companyNameInput.value.trim();
            if (!companyNameValue) {
                isValid = false;
                companyNameInput.classList.add('error');
                companyNameError.classList.add('show');
                if (!firstError) {
                    firstError = companyNameInput;
                }
            }

            // Validate email - check input value directly
            const emailValue = emailInput.value.trim();
            if (!emailValue || !EMAIL_REGEX.test(emailValue)) {
                isValid = false;
                emailInput.classList.add('error');
                emailError.classList.add('show');
                if (!firstError) {
                    firstError = emailInput;
                }
            }

            // Validate questions
            QUESTIONS.forEach(question => {
                const fieldset = document.getElementById(`question-${question.id}`);
                if (answers[question.id] === undefined) {
                    isValid = false;
                    if (fieldset) {
                        fieldset.classList.add('error');
                        if (!firstError) {
                            firstError = fieldset;
                        }
                    }
                }
            });

            if (!isValid) {
                warning.classList.add('show');
                if (firstError) {
                    firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            } else {
                warning.classList.remove('show');
            }

            return isValid;
        }

        // Calculate scores
        function calculateScores() {
            // Calculate category scores (2 questions per category, max 6 points each)
            const categoryScores = {
                strategy: 0,
                governance: 0,
                skills: 0,
                technology: 0
            };

            QUESTIONS.forEach(question => {
                const value = answers[question.id] || 0;
                categoryScores[question.categoryGroup] += value;
            });

            // Calculate total score (8 questions, max 24 points)
            const totalScore = Object.values(categoryScores).reduce((sum, score) => sum + score, 0);

            return {
                total: totalScore,
                categories: categoryScores
            };
        }

        // Determine maturity level
        function determineMaturityLevel(scores) {
            const { total, categories } = scores;

            // Apply override rules - these ensure results reflect actual organizational state
            
            // Rule 1: Organizations with minimal AI usage and no governance structure
            // should always be considered at the starting level, regardless of plans
            if (answers.usage <= 1 && answers.governance <= 1) {
                return 1;
            }

            // Rule 2: Organizations actively using AI with implemented use cases
            // should be at least at experimenting level
            if (answers.usage >= 2 && answers.usecases >= 2) {
                // Check if total score qualifies for Level 3 or 4
                if (total >= 13) {
                    return total >= 19 ? 4 : 3;
                }
                return 2;
            }

            // Rule 3: Organizations with strong performance across ALL categories (5+/6 each)
            // demonstrate strategic leadership regardless of total score
            if (Object.values(categories).every(score => score >= 5)) {
                return 4;
            }

            // Standard level determination by score
            for (let level = 4; level >= 1; level--) {
                const levelDef = MATURITY_LEVELS[level];
                if (total >= levelDef.range[0] && total <= levelDef.range[1]) {
                    return level;
                }
            }

            return 1; // Default to Level 1
        }

        // Render results
        // Note: All content (levelDef.name, explanation, recommendations) comes from the hardcoded 
        // MATURITY_LEVELS object, not user input, so template literals are safe here
        function renderResults(level, scores) {
            const resultsDiv = document.getElementById('results');
            const levelDef = MATURITY_LEVELS[level];

            const html = `
                <div class="result-card">
                    <h2 class="result-title">Your AI Maturity Level: ${levelDef.name}</h2>
                    <span class="badge ${levelDef.badge}">Level ${level}: ${levelDef.name}</span>
                    
                    <div class="result-explanation">
                        <p>${levelDef.explanation}</p>
                    </div>

                    <div class="recommendations">
                        <h3>Recommended Next Steps</h3>
                        <ul>
                            ${levelDef.recommendations.map(rec => `<li>${rec}</li>`).join('')}
                        </ul>
                    </div>

                    <div class="category-scores">
                        <h3>Category Breakdown</h3>
                        <div class="score-item">
                            <span class="score-label">Strategy and Maturity</span>
                            <span class="score-value">${scores.categories.strategy} / 6</span>
                        </div>
                        <div class="score-item">
                            <span class="score-label">Organization and Governance</span>
                            <span class="score-value">${scores.categories.governance} / 6</span>
                        </div>
                        <div class="score-item">
                            <span class="score-label">Skills and Culture</span>
                            <span class="score-value">${scores.categories.skills} / 6</span>
                        </div>
                        <div class="score-item">
                            <span class="score-label">Technology and Use Cases</span>
                            <span class="score-value">${scores.categories.technology} / 6</span>
                        </div>
                        <div class="score-item" style="margin-top: 1rem; border-top: 2px solid #e2e8f0; padding-top: 1rem;">
                            <span class="score-label" style="font-weight: 700;">Total Score</span>
                            <span class="score-value" style="font-size: 1.3rem;">${scores.total} / 24</span>
                        </div>
                    </div>
                </div>
            `;

            resultsDiv.innerHTML = html;
            resultsDiv.classList.add('show');
            resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Handle form submission
        function handleSubmit(e) {
            e.preventDefault();

            if (!validateForm()) {
                return;
            }

            // Calculate scores and determine level
            const scores = calculateScores();
            const level = determineMaturityLevel(scores);

            // Render results
            renderResults(level, scores);
        }

        // Initialize form on page load
        document.addEventListener('DOMContentLoaded', () => {
            initForm();

            const form = document.getElementById('assessmentForm');
            form.addEventListener('submit', handleSubmit);
        });
    </script>
</body>
</html>